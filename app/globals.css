@import "maplibre-gl/dist/maplibre-gl.css";
@import "@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light theme - Earthy & Natural */
    --background: 60 50% 98.4%;        /* #FDFDF8 - Warm off-white */
    --foreground: 0 0% 10.2%;          /* #1A1A1A - Near-black */
    --card: 0 0% 100%;                 /* #FFFFFF - Pure white */
    --card-foreground: 0 0% 10.2%;     /* #1A1A1A - Near-black */
    --popover: 0 0% 100%;              /* #FFFFFF - Pure white */
    --popover-foreground: 0 0% 10.2%;  /* #1A1A1A - Near-black */
    --primary: 96 56.9% 20%;           /* #2D5016 - Deep forest green */
    --primary-foreground: 0 0% 100%;   /* #FFFFFF - White */
    --secondary: 33 24.1% 43.9%;       /* #8B7355 - Warm brown */
    --secondary-foreground: 0 0% 100%; /* #FFFFFF - White */
    --muted: 60 25% 95.1%;             /* #F5F5F0 - Subtle beige */
    --muted-foreground: 0 0% 45%;      /* #737373 - Medium gray */
    --accent: 40 46.2% 83.9%;          /* #E8DCC4 - Light tan/cream */
    --accent-foreground: 0 0% 10.2%;   /* #1A1A1A - Near-black */
    --destructive: 0 84.2% 60.2%;      /* #EF4444 - Red */
    --destructive-foreground: 0 0% 100%; /* #FFFFFF - White */
    --border: 60 20% 88%;              /* #E5E5DC - Subtle warm gray */
    --input: 60 20% 88%;               /* #E5E5DC - Subtle warm gray */
    --ring: 96 56.9% 20%;              /* #2D5016 - Deep forest green */
    --radius: 0.5rem;
  }

  [data-theme="dark"] {
    /* Future dark mode (placeholder) */
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 10%;
    --secondary: 0 0% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 15.9%;
    --muted-foreground: 0 0% 64.9%;
    --accent: 0 0% 15.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 15.9%;
    --input: 0 0% 15.9%;
    --ring: 0 0% 83.9%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: 'Inter', sans-serif;
  }
  h1, h2, h3, h4, h5, h6 {
    @apply font-serif;
  }
}

/* Ensure MapboxDraw controls are clickable and visible */
.mapboxgl-ctrl-group,
.maplibregl-ctrl-group {
  z-index: 50 !important;
  pointer-events: auto !important;
  background-color: hsl(var(--card)) !important;
  border-radius: var(--radius) !important;
}

.mapboxgl-ctrl-group button,
.maplibregl-ctrl-group button {
  pointer-events: auto !important;
  cursor: pointer !important;
  background-color: hsl(var(--card)) !important;
  border: none !important;
  color: hsl(var(--card-foreground)) !important;
  width: 32px !important;
  height: 32px !important;
}

.mapboxgl-ctrl-group button:hover,
.maplibregl-ctrl-group button:hover {
  background-color: hsl(var(--accent)) !important;
}

.mapbox-gl-draw_ctrl-draw-btn {
  background-size: 20px 20px !important;
  background-position: center !important;
  background-repeat: no-repeat !important;
  border: 1px solid hsl(var(--border)) !important;
}

.mapbox-gl-draw_point {
  background-image: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path fill="%23fafafa" d="m10 2c-3.3 0-6 2.7-6 6s6 9 6 9 6-5.7 6-9-2.7-6-6-6zm0 2c2.1 0 3.8 1.7 3.8 3.8 0 1.5-1.8 3.9-2.9 5.2h-1.7c-1.1-1.4-2.9-3.8-2.9-5.2-.1-2.1 1.6-3.8 3.7-3.8z"/></svg>') !important;
}

.mapbox-gl-draw_line {
  background-image: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path fill="%23fafafa" d="m13.5 3.5c-1.4 0-2.5 1.1-2.5 2.5 0 .3 0 .6.2.9l-3.8 3.8c-.3-.1-.6-.2-.9-.2-1.4 0-2.5 1.1-2.5 2.5s1.1 2.5 2.5 2.5 2.5-1.1 2.5-2.5c0-.3 0-.6-.2-.9l3.8-3.8c.3.1.6.2.9.2 1.4 0 2.5-1.1 2.5-2.5s-1.1-2.5-2.5-2.5z"/></svg>') !important;
}

.mapbox-gl-draw_polygon {
  background-image: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path fill="%23fafafa" d="m15 12.3v-4.6c.6-.3 1-1 1-1.7 0-1.1-.9-2-2-2-.7 0-1.4.4-1.7 1h-4.6c-.3-.6-1-1-1.7-1-1.1 0-2 .9-2 2 0 .7.4 1.4 1 1.7v4.6c-.6.3-1 1-1 1.7 0 1.1.9 2 2 2 .7 0 1.4-.4 1.7-1h4.6c.3.6 1 1 1.7 1 1.1 0 2-.9 2-2 0-.7-.4-1.4-1-1.7zm-8-.3v-4l1-1h4l1 1v4l-1 1h-4z"/></svg>') !important;
}

.mapbox-gl-draw_trash {
  background-image: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path fill="%23fafafa" d="M10,3.4 c-0.8,0-1.5,0.5-1.8,1.2H5l-1,1v1h12v-1l-1-1h-3.2C11.5,3.9,10.8,3.4,10,3.4z M5,8v7c0,1,1,2,2,2h6c1,0,2-1,2-2V8h-2v5.5h-1.5V8h-3 v5.5H7V8H5z"/></svg>') !important;
}

/* Active drawing tool */
.mapbox-gl-draw_ctrl-draw-btn.active {
  background-color: hsl(var(--accent)) !important;
}


/* Trash icon */
.mapbox-gl-draw_trash {
  background-color: hsl(var(--card)) !important;
}

.mapbox-gl-draw_trash:hover {
  background-color: hsl(var(--destructive)) !important;
  color: hsl(var(--destructive-foreground)) !important;
}

/* Ensure cursor changes when drawing */
.mode-draw_point,
.mode-draw_point * {
  cursor: crosshair !important;
}

.mode-draw_line_string,
.mode-draw_line_string * {
  cursor: crosshair !important;
}

.mode-draw_polygon,
.mode-draw_polygon * {
  cursor: crosshair !important;
}

.mode-simple_select {
  cursor: default !important;
}

/* Override the default grab cursor when in drawing mode */
.mode-draw_point .maplibregl-canvas,
.mode-draw_line_string .maplibregl-canvas,
.mode-draw_polygon .maplibregl-canvas {
  cursor: crosshair !important;
}

/* Ensure the MapLibre navigation controls work too */
.maplibregl-ctrl-zoom-in,
.maplibregl-ctrl-zoom-out,
.maplibregl-ctrl-compass {
  pointer-events: auto !important;
  cursor: pointer !important;
}
